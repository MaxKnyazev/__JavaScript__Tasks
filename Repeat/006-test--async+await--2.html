<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>006-test</title>

  <style>
    .title {
      color: black;
      transition: all 1000ms linear;
      /*animation: bounce 2s 5 ease-in-out;*/
    }

    /*@keyframes bounce {*/
    /*  from {*/
    /*    width: 600px;*/
    /*    animation-timing-function: ease-out;*/
    /*  }*/
    /*  25% {*/
    /*    width: 300px;*/
    /*    animation-timing-function: ease-in;*/
    /*  }*/
    /*  50% {*/
    /*    width: 100px;*/
    /*    animation-timing-function: ease-out;*/
    /*  }*/
    /*  75% {*/
    /*    width: 300px;*/
    /*    animation-timing-function: ease-in;*/
    /*  }*/
    /*  to {*/
    /*    width: 600px;*/
    /*  }*/
    /*}*/
  </style>

</head>
<body>

<h1 class="title">006-test : Async/Await</h1>

<script>
  console.log('------------------Started script...');
  const title = document.querySelector('.title');

  // const delayFn = (fn, ms) => new Promise ((resolve) => {
  //   setTimeout(() => {
  //     fn();
  //     resolve();
  //   }, ms)
  // })

  const delay = ms => new Promise ((resolve) => {
    setTimeout(() => {
      resolve();
    }, ms)
  })

  const fn1 = () => {
    console.log('run fn1');
    title.style.backgroundColor = 'yellow';
    title.style.color = 'black';
    title.style.marginTop = '100px';
  }

  const fn2 = () => {
    console.log('run fn2');
    title.style.backgroundColor = 'red';
    title.style.color = 'white';
    title.style.marginTop = '0';
  }

  const asyncFn = async function () {
    try {
      await delay(2000);
      title.style.color = 'red';
      title.style.backgroundColor = '#eeeeee';
      await console.log('after 2000 ms');
      await delay(2000);
      title.style.color = 'blue';
      await console.log('after 2000 ms');

      await delay(2000);
      await fn1();
      await console.log('after fn1 2000 ms');
      await delay(2000);
      await fn2();
      await console.log('after fn2 2000 ms');

    } catch (error) {
      console.log(error)
    } finally {
      console.log('finally')
    }
  }

  asyncFn();



</script>

</body>
</html>
